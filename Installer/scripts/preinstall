#!/bin/bash

echo "üîç Srz Clipboard Pre-installation Check"
echo "======================================"

# Check macOS version
MACOS_VERSION=$(sw_vers -productVersion | cut -d. -f1,2)
REQUIRED_VERSION="11.0"

echo "üì± Current macOS version: $MACOS_VERSION"

if (( $(echo "$MACOS_VERSION < $REQUIRED_VERSION" | bc -l) )); then
    echo "‚ùå Error: macOS $REQUIRED_VERSION or later is required"
    echo "   Current version: $MACOS_VERSION"
    exit 1
fi

echo "‚úÖ macOS version check passed"

# Check if app is already installed
if [ -d "/Applications/Srz Clipboard.app" ]; then
    echo "‚ö†Ô∏è  Srz Clipboard is already installed"
    echo "üîÑ Stopping existing instances..."
    pkill -f "Srz Clipboard" 2>/dev/null || true
    sleep 2
    echo "‚úÖ Existing instances stopped"
fi

echo "‚úÖ Pre-installation checks completed"
exit 0
